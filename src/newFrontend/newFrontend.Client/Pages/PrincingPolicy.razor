@page "/pricingpolicy"
@using newFrontend.Client.Pages
@using newFrontend.Client.Services
@using Parking.Shared.Models
@inject IPricesService PricesService
@inject ISnackbar Snackbar

<PageTitle>Preços - T&D</PageTitle>

<br />
<MudText Typo="Typo.h4" GutterBottom="true">Política de Preços</MudText>

<MudStack Row="true" AlignItems="AlignItems.Center">
  <MudText Typo="Typo.subtitle1">Nesta página, você pode modificar a política de preços do estacionamento.
    <br /> Para cada tipo de veículo cadastrado no sistema, há um valor que é cobrado por hora.
  </MudText>

  <MudSpacer />

  <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.DirectionsCarFilled" Color="Color.Primary"
    Size="Size.Medium" DropShadow="false" Disabled="@buttonDisabled">
    Salvar Modificações
  </MudButton>

  <MudSpacer />

</MudStack>

<br />

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-4 pb-28">
  <MudStack Spacing="4" Justify="Justify.Center">

    @if (allPrices is null)
    {
      <MudProgressCircular Indeterminate="true" />
      <MudText> Carregando preços...</MudText>
    }
    else if (!allPrices.Any())
    {
      <MudAlert Severity="Severity.Warning">Nenhum preço foi configurado.</MudAlert>
    }
    else
    {
      @foreach (var price in allPrices)
      {
        <MudCard Class="rounded-lg pa-4" Outlined="true" Elevation="25">
          <MudSlider onchange="@(() => OnPriceChange(price))" Size="Size.Medium" T="decimal"
            @bind-Value="@price.HourlyPrice" ValueLabel="true" Step="0.5m" Variant="Variant.Filled" Culture="@culture"
            ValueLabelFormat="C" Min="0" Max="50">
            <MudText Typo="Typo.h6"> <b>@GetVehicleName(price.Type):</b> @price.HourlyPrice.ToString("C")/hora
            </MudText>
          </MudSlider>
        </MudCard>
      }
    }
  </MudStack>

  <MudSpacer />
</MudContainer>
